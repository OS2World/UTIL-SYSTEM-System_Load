;
;    OS/4 RDMSR$
;
;    Copyright (c) OS/4 Team 2016
;    All Rights Reserved
;   ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
;
;
;
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; ‘®еа ­Ґ­ЁҐ аҐЈЁбва®ў
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
SaveReg            Macro   Which                                     ;
                   irp     y,<Which>                                 ; ¬ Єа®б ў ¬ Єа®бҐ а §ўҐавлў ойЁ© ўбҐ  аЈг¬Ґ­вл
                       push y                                        ;
                   EndM                                              ;
EndM
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; ‚®ббв ­®ў«Ґ­ЁҐ аҐЈЁбва®ў
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
RestReg            Macro   Which                                     ;
                   irp     y,<Which>                                 ; ¬ Єа®б ў ¬ Єа®бҐ а §ўҐавлў ойЁ© ўбҐ  аЈг¬Ґ­вл
                       pop y                                         ;
                   EndM                                              ;
EndM
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; ‘®еа ­Ґ­ЁҐ аҐЈЁбва®ў ¤«п – ўл§®ў 
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
SaveCRegs          Macro
                   SaveReg <ds,es,ebx,edi,esi,ebp>
EndM
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; ‚®бв ­®ў«Ґ­ЁҐ аҐЈЁбва®ў ¤«п – ўл§®ў 
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
RestCRegs          Macro
                   RestReg <ebp,esi,edi,ebx,es,ds>
EndM
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; “бв ­®ўЄ   FLAT ­  аҐЈЁбвал (32 ЎЁв)
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
SetFlat32          Macro   Who, How                                  ;
                   mov     How, offset Dos32FlatDS                   ;
                   irp y,<Who>                                       ; ¬ Єа®б ў ¬ Єа®бҐ а §ўҐавлў ойЁ© ўбҐ  аЈг¬Ґ­вл
                       mov y,e&How                                   ;
                       assume y:FLAT                                 ;
                   EndM                                              ;
EndM
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; wasm ®вЄ § «бп ЈҐ­ҐаЁвм  call far32 ptr
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
callfar32          Macro  Target
                   db 9Ah
                   dd offset Target
                   dw seg _TEXT16
EndM
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
; Device Helpers
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
DevHlp_Save_Message     equ  61
MsgTable  struc
MsgID     dw  ?
NumItem   dw  ?
PtrItem   dd  ?
MsgTable  ends
MSG_REPLACEMENT_STRING  equ  1178
